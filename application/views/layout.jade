| <!DOCTYPE html>

| <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
| <!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
| <!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
| <!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

head

  meta(charset="utf-8")
  meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")
  meta(name="description", content="")
  meta(name="viewport", content="width=device-width")

  title #{Helper::full_title(Section::yield('page_title'), Section::yield('page_action'))}

  !{HTML::style('http://fonts.googleapis.com/css?family=Telex')}
  !{Helper::asset('css/all')}


  - if (Auth::guest()):
    - $body_class = "no-auth";
    - print "<style>.only-user { display: none; }</style>";
  - else:
    - $body_class = "auth " . (Auth::user()->vendor ? "vendor" : "officer");
    - print "<style>.only-user:not(.only-user-".Auth::user()->id."), .not-user-".Auth::user()->id." { display: none; }</style>";
  - endif;

  - if (Auth::officer() && Auth::officer()->role == Officer::ROLE_ADMIN):
    - $body_class .= " admin"
  - elseif (Auth::officer() && Auth::officer()->role == Officer::ROLE_SUPER_ADMIN):
    - $body_class .= " super-admin"
  - endif;

  !{HTML::script('js/modernizr.js')}

  script(src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js")
  script
    | window.jQuery || document.write('<script src="/js/vendor/jquery-1.8.1.min.js"><\/script>')

  !{Helper::asset('js/all')}

  !{Section::yield('additional_scripts')}

body(class="#{$body_class}")

  #pjax-container

    !{View::make('pjaxcontainer')->with('content', $content)}

  - if (Request::is_env('production'))
    script(src="/js/vendor/google.analytics.js")
    script(src="/js/vendor/jquery.formtimer.js")
    script
      | $(document).on("ready pjax:success", function() { $("form").formTimer(); });

| </html>